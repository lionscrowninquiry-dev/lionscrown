<!doctype html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>2025 åŸ¼ç‰è¥¿æ­¦ãƒ©ã‚¤ã‚ªãƒ³ã‚º æˆç¸¾ä¸€è¦§</title>

<style>
body{
  font-family: system-ui, sans-serif;
  background:#f5f6f8;
  padding:20px;
}
h1{
  margin-bottom:10px;
}
table{
  border-collapse:collapse;
  width:100%;
  background:#fff;
}
th,td{
  border:1px solid #bbb;
  padding:6px;
  text-align:center;
  font-size:14px;
}
th{
  background:#092048;
  color:#fff;
  position:sticky;
  top:0;
}
input{
  width:60px;
  text-align:center;
}
.readonly input{
  pointer-events:none;
  user-select:none;
  background:#f0f0f0;
  border:none;
}
.badge{
  position:fixed;
  top:10px;
  right:10px;
  background:#c00;
  color:#fff;
  padding:6px 12px;
  font-weight:bold;
  z-index:9999;
}
</style>
</head>

<body>

<h1>2025 åŸ¼ç‰è¥¿æ­¦ãƒ©ã‚¤ã‚ªãƒ³ã‚º æˆç¸¾æ¼”ç®—ä¸€è¦§</h1>
<p>â€» ç®¡ç†äººã®ã¿ç·¨é›†å¯èƒ½ï¼ˆé€šå¸¸é–²è¦§ã¯é–²è¦§å°‚ç”¨ï¼‰</p>

<table>
<thead>
<tr>
  <th>é¸æ‰‹å</th>
  <th>AB</th><th>H</th><th>2B</th><th>3B</th>
  <th>HR</th><th>BB</th><th>HBP</th>
  <th>AVG</th><th>OPS</th>
  <th>IP</th><th>ER</th><th>ERA</th>
</tr>
</thead>

<tbody id="roster">

<!-- ===============================
  ğŸ”½ é¸æ‰‹Templateï¼ˆã“ã“ã‚’å¢—ã‚„ã™ï¼‰
  1è¡Œï¼1é¸æ‰‹
================================ -->

<tr class="playerRow">
  <td>é¸æ‰‹åâ‘ ï¼ˆé‡æ‰‹ï¼‰</td>
  <td><input class="ab" type="number"></td>
  <td><input class="h" type="number"></td>
  <td><input class="d2" type="number"></td>
  <td><input class="d3" type="number"></td>
  <td><input class="hr" type="number"></td>
  <td><input class="bb" type="number"></td>
  <td><input class="hbp" type="number"></td>
  <td class="avg">.000</td>
  <td class="ops">.000</td>
  <td><input class="ip" type="number" step="0.1"></td>
  <td><input class="er" type="number"></td>
  <td class="era">0.00</td>
</tr>

<tr class="playerRow">
  <td>é¸æ‰‹åâ‘¡ï¼ˆæŠ•æ‰‹ï¼‰</td>
  <td><input class="ab" type="number" value="0"></td>
  <td><input class="h" type="number" value="0"></td>
  <td><input class="d2" type="number" value="0"></td>
  <td><input class="d3" type="number" value="0"></td>
  <td><input class="hr" type="number" value="0"></td>
  <td><input class="bb" type="number" value="0"></td>
  <td><input class="hbp" type="number" value="0"></td>
  <td class="avg">.000</td>
  <td class="ops">.000</td>
  <td><input class="ip" type="number" step="0.1"></td>
  <td><input class="er" type="number"></td>
  <td class="era">0.00</td>
</tr>

<!-- â†‘ ã“ã®Templateã‚’2025å¹´å…¨é¸æ‰‹åˆ†ã‚³ãƒ”ãƒ¼ -->

</tbody>
</table>

<script>
/* ===============================
   æˆç¸¾è¨ˆç®—
================================ */
function calcAll(){
  document.querySelectorAll(".playerRow").forEach(row=>{
    const ab  = +row.querySelector(".ab").value;
    const h   = +row.querySelector(".h").value;
    const d2  = +row.querySelector(".d2").value;
    const d3  = +row.querySelector(".d3").value;
    const hr  = +row.querySelector(".hr").value;
    const bb  = +row.querySelector(".bb").value;
    const hbp = +row.querySelector(".hbp").value;

    const single = h - d2 - d3 - hr;
    const avg = ab ? h / ab : 0;
    const obp = (ab + bb + hbp) ? (h + bb + hbp) / (ab + bb + hbp) : 0;
    const slg = ab ? (single + d2*2 + d3*3 + hr*4) / ab : 0;
    const ops = obp + slg;

    row.querySelector(".avg").textContent =
      avg.toFixed(3).replace("0.", ".");
    row.querySelector(".ops").textContent =
      ops.toFixed(3);

    const ip = +row.querySelector(".ip").value;
    const er = +row.querySelector(".er").value;
    row.querySelector(".era").textContent =
      (ip ? (er * 9 / ip) : 0).toFixed(2);
  });
}

/* ===============================
   ç®¡ç†äººåˆ¤å®š
================================ */
const params = new URLSearchParams(location.search);
const IS_ADMIN = params.get("admin") === "1";

document.querySelectorAll("input").forEach(i=>{
  if(!IS_ADMIN){
    i.disabled = true;
    document.body.classList.add("readonly");
  }
  i.addEventListener("input", calcAll);
});

if(IS_ADMIN){
  const badge = document.createElement("div");
  badge.className = "badge";
  badge.textContent = "ç®¡ç†äººç·¨é›†ãƒ¢ãƒ¼ãƒ‰";
  document.body.appendChild(badge);
}

/* ===============================
   æ“ä½œæŠ‘æ­¢ï¼ˆä¸€èˆ¬é–²è¦§è€…ï¼‰
================================ */
if(!IS_ADMIN){
  document.addEventListener("contextmenu", e => e.preventDefault());
  document.addEventListener("keydown", e=>{
    if(
      e.key === "F12" ||
      (e.ctrlKey && ["c","s","u","a","p"].includes(e.key.toLowerCase()))
    ){
      e.preventDefault();
    }
  });
}
</script>

</body>
</html>
